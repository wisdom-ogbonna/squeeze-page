var VideoPlayerApp=function(e){var t=this;this.device={},this.timers={},this.playingId=null;var o="video-autoplay-overlay-top",i="video-autoplay-overlay-bottom",a="video-autoplay-overlay-play",r={version:"1.4.26",debug:!1,demoMode:!1,lazyLoadDisable:!1,useIntersectionObserver:!0,targetClassName:"videoplayerapp-element",width:"100%",height:350,iconImageUrl:"hand-pointer.png",playImageUrl:"play-circle.png",fullScreenImageUrl:"assets/js/video-player/switch-to-full-screen-button-white.svg",unmutedImageUrl:"assets/js/video-player/sound-unmute.svg",mutedImageUrl:"assets/js/video-player/sound-mute.svg",lottieFileUrl:"",remoteBaseUrl:"https://videoplayerapp.net/assets/js/video-player/",skinsAvailable:["light","rounded-corners","flat","modern","pill","lines","block"],posterUrl:"",colorBars:"#00b3ff",colorPlayButton:"#00b3ff",colorProgressBarTotal:"rgba(255,255,255,0.65)",colorProgressBar:"#2369b6",unmuteText:"Video is Playingâ€¦",unmuteTextSecondary:"Click For Sound",unmuteTextColor:"#ffffff",unmuteBackgroundColor:"rgba(0,0,0,0.3)",lotteAnimationElementColors:["#000000","#ffffff","#ffffff"],lottieAnimationColorsMapping:[0,1,2],textPaused:"paused",textEnded:"ended",skin:"",allow:"",autoPlay:!0,loop:!1,startMuted:!0,autoPlayShakeAnimation:!0,pauseOthersWhenPlaying:!0,regularPlayerForMobileFirefox:!0,disableSeek:!1,watermarkTextContent:"",watermarkTextColor:"#ffffff",watermarkTextFontSize:"22px",watermarkImageUrl:"",watermarkSize:150,toolbarButtonSize:20,watermarkTransparency:.3,watermarkPosition:"right-top"},n=0;this.init=function(){if(window.vpaPlayers||(window.vpaPlayers={}),r.skin&&r.skinsAvailable.indexOf(r.skin)>-1){var e=r.remoteBaseUrl+"styles/"+r.skin+".css?"+r.version;this.debugLog("BEFORE LOAD STYLESHEET",e),document.getElementById("player-stylesheet-"+r.skin)||this.loadStyleSheet(e,null,this,"player-stylesheet-"+r.skin),this.debugLog("AFTER LOAD STYLESHEET",e),-1===o.indexOf("-"+r.skin)&&(o+="-"+r.skin,i+="-"+r.skin,a+="-"+r.skin)}else r.skin="",this.debugLog("SKIN IS NOT AVAILABLE",r.skin);this.debugLog("[INIT]",r),this.deviceDetectInit(),r.autoPlayShakeAnimation&&this.createAnimationStyleSheet(),this.device.isMobileFirefox&&r.regularPlayerForMobileFirefox&&(r.useIntersectionObserver=!1),this.onReady((function(){t.debugLog("[DOCUMENT_READY]"),r.demoMode?t.demoModeInit():!r.lazyLoadDisable&&r.useIntersectionObserver?!window.YT||window.onYouTubeIframeAPIReady||window.YT.loaded?window.YT?t.runOnYouTubePlayerReady(t.setupIntersectionObserver.bind(t)):t.setupIntersectionObserver():window.onYouTubeIframeAPIReady=function(){t.debugLog("[YOUTUBE_PLAYER] READY"),t.setupIntersectionObserver()}:t.embedVideos()}))},this.runOnYouTubePlayerReady=function(e,o){o=o||0,window.YT?(clearTimeout(this.timers.youTubePlayerReady),this.timers.youTubePlayerReady=setTimeout((function(){o>20||(t.debugLog("runOnYouTubePlayerReady",++o),window.YT&&window.YT.loaded?e():t.runOnYouTubePlayerReady(e,o))}),100)):e()},this.createIntersectionObserver=function(e,t){var o=new IntersectionObserver((function(e){e.forEach((function(e){t(e,o)}))}),{root:null,rootMargin:"0px",threshold:[0,.25,.5,.75,1]});o.observe(e)},this.setupIntersectionObserver=function(){var e,o;t.debugLog("[OBSERVER_SETUP]",r.targetClassName),document.querySelectorAll("."+r.targetClassName).forEach((function(i){o=i.dataset.youtubeId,e=i.dataset.vimeoId||i.dataset.vimeoVideoId,r.allow&&(e&&-1===r.allow.indexOf("vimeo")||o&&-1===r.allow.indexOf("youtube"))||t.createIntersectionObserver(i,(function(e,o){e.isIntersecting&&e.intersectionRatio>=.5&&(t.debugLog("[OBSERVER_CALLBACK] element visible",e.target.dataset.vimeoId||e.target.dataset.youtubeId),o.unobserve(e.target),t.createPlayer(null,e.target))}))}))},this.onReady=function(e){this.debugLog("[ON_READY_STATE]",document.readyState),(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)},this.updateOptions=function(e){r.skin&&(o=o.replace("-"+r.skin,""),i=i.replace("-"+r.skin,""),a=a.replace("-"+r.skin,"")),this.extend(r,e),-1===o.indexOf("-"+r.skin)&&(o+="-"+r.skin,i+="-"+r.skin,a+="-"+r.skin)},this.watermarkInit=function(e,o){if(r.watermarkTextContent||r.watermarkImageUrl){var i;if(e.querySelector(".video-autoplay-overlay-watermark"))i=e.querySelector(".video-autoplay-overlay-watermark");else{function a(e){var t=e.clientWidth,o=e.clientHeight;t/o<=1.1&&(e.style.height=Math.ceil(.6*o)+"px",e.style.width="auto"),e.style.visibility="visible"}i=t.createElement("div",{className:"video-autoplay-overlay-watermark"+(r.skin?" video-autoplay-overlay-watermark-"+r.skin+"-"+r.watermarkPosition:""),innerHTML:r.watermarkImageUrl?'<img src="'+r.watermarkImageUrl+'" alt="" style="width: '+r.watermarkSize+'px; height: auto; visibility: hidden;">':r.watermarkTextContent},t.extend({position:"absolute",textAlign:["left-top","left-bottom"].indexOf(r.watermarkPosition)>-1?"left":"right",width:"auto",height:"auto",display:"block",opacity:1-r.watermarkTransparency,color:r.watermarkTextColor,fontSize:r.watermarkTextFontSize,fontWeight:"bold",lineHeight:"1",pointerEvents:"none"},l())),e.appendChild(i);var n=i.querySelector("img");n&&(n.onload=function(){a(n)},n.complete&&a(n))}o?t.isPlayerYouTube(o)?t.css(i,l(o.getPlayerState()!==YT.PlayerState.PLAYING)):o.getPaused().then((function(e){t.css(i,l(e))})):t.css(i,l(!1))}function l(e){return{left:["left-top","left-bottom"].indexOf(r.watermarkPosition)>-1?"20px":"auto",top:["left-top","right-top"].indexOf(r.watermarkPosition)>-1?"20px":"auto",right:["right-top","right-bottom"].indexOf(r.watermarkPosition)>-1?"20px":"auto",bottom:["left-bottom","right-bottom"].indexOf(r.watermarkPosition)>-1?e?"75px":"28px":"auto"}}},this.fullScreenButtonInit=function(e,o){var i;r.fullScreenImageUrl&&(e.querySelector(".video-autoplay-overlay-full-screen-button")?i=e.querySelector(".video-autoplay-overlay-full-screen-button"):((i=t.createElement("div",{className:"video-autoplay-overlay-full-screen-button"+(r.skin?" video-autoplay-overlay-full-screen-button-"+r.skin:""),innerHTML:'<img src="'+r.fullScreenImageUrl+'" alt="" style="width: '+r.toolbarButtonSize+'px; height: auto;">',title:"Full screen"},{position:"absolute",width:r.toolbarButtonSize+"px",height:"auto",display:"block",cursor:"pointer"})).addEventListener("click",(function(i){if(i.preventDefault(),i.stopPropagation(),!r.demoMode){e.querySelector("iframe");if(o&&(t.isPlayerYouTube(o)?o.getPlayerState()!==YT.PlayerState.PLAYING&&o.playVideo():o.getPaused().then((function(e){e&&o.play()}))),document.fullscreenElement){var a=document.exitFullscreen||document.mozExitFullscreen||document.webkitExitFullscreen;a&&a.bind(document)()}else{var n=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;n&&n.bind(e)()}t.volumeInputHide(e,0)}})),e.appendChild(i)),r.skin?this.isOverlayImageMode(e)?i.style.display="none":i.style.display=r.demoMode&&!r.autoPlay||!this.isOverlayImageMode(e)?"block":"none":(i.style.display=r.demoMode&&!r.autoPlay||!this.isOverlayImageMode(e)?"block":"none",o&&!this.isOverlayImageMode(e)?this.isPlayerYouTube(o)?this.css(i,a(o.getPlayerState&&o.getPlayerState()!==YT.PlayerState.PLAYING)):o.getPaused().then((function(e){t.css(i,a(e))})):this.isOverlayImageMode(e)||t.css(i,a(r.demoMode))));function a(e){return{left:"right-bottom"===r.watermarkPosition?"14px":"auto",top:"auto",right:"right-bottom"===r.watermarkPosition?"auto":"14px",bottom:e?"14px":"25px"}}},this.toolbarButtonInit=function(e,o,i,a,n,l,s,u,d){var A,y="video-autoplay-overlay-"+i;function c(e){var t=14+(l.y||0),o=e?14:25;return t+=l.x||0,{left:"right-bottom"===r.watermarkPosition?t+"px":"auto",top:"auto",right:"right-bottom"===r.watermarkPosition?"auto":t+"px",bottom:o+"px"}}return e.querySelector("."+y)?A=e.querySelector("."+y):((A=t.createElement("div",{className:y+(r.skin?" "+y+"-"+r.skin:""),innerHTML:'<img src="'+a+'" alt="" style="width: auto; height: '+r.toolbarButtonSize+'px;">',title:n},{position:"absolute",width:r.toolbarButtonSize+"px",height:"auto",display:"block",cursor:"pointer"})).addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),r.demoMode||"function"==typeof s&&s(e)})),r.demoMode||("function"==typeof u&&A.addEventListener("mouseenter",(function(e){u(e)})),"function"==typeof d&&A.addEventListener("mouseleave",(function(e){d(e)}))),e.appendChild(A)),r.skin?this.isOverlayImageMode(e)?A.style.display="none":A.style.display=r.demoMode&&!r.autoPlay||!this.isOverlayImageMode(e)?"block":"none":(A.style.display=r.demoMode&&!r.autoPlay||!this.isOverlayImageMode(e)?"block":"none",o&&!this.isOverlayImageMode(e)?this.isPlayerYouTube(o)?this.css(A,c(o.getPlayerState()!==YT.PlayerState.PLAYING)):o.getPaused().then((function(e){t.css(A,c(e))})):this.isOverlayImageMode(e)||t.css(A,c(r.demoMode))),A},this.volumeButtonInit=function(e,o){var i=function(t,o){!o&&t&&(o=t.target);var i=e.querySelector(".video-autoplay-overlay-volume-"+r.skin),a=o.getBoundingClientRect(),n=e.getBoundingClientRect(),l=a.x-n.x-6;i.style.display="block",i.style.right="auto",i.style.left=l+"px"};t.toolbarButtonInit(e,o,"volume-button",r.unmutedImageUrl,"Mute / Unmute",{x:45,y:0},(function(a){if(t.device.isMobile&&n<1)return i(null,e.querySelector(".video-autoplay-overlay-volume-button")),void n++;n=0,t.getIsMuted(o,(function(i){i?t.unMute(e,o):t.mute(e,o)})),t.volumeInputHide(e,0)}),(function(e){t.getIsMuted(o,(function(t){t||i(e)}))}),(function(){t.volumeInputHide(e,2e3)}))},this.mute=function(e,o){t.isPlayerYouTube(o)?(o.mute(),t.onMuted(e)):(o.setVolume(0),t.onMuted(e))},this.unMute=function(e,o){t.isPlayerYouTube(o)?(o.unMute(),t.onUnMuted(e)):(o.setVolume(1),t.onUnMuted(e))},this.getIsMuted=function(e,o){t.isPlayerYouTube(e)?!e.isMuted()&&e.getVolume()>0?o(!1):o(!0):e.getVolume().then((function(e){o(0===e)}))},this.onMuted=function(e){var t="video-autoplay-overlay-volume-button";e.querySelector("."+t)&&(e.querySelector("."+t).querySelector("img").src=r.mutedImageUrl)},this.onUnMuted=function(e){var t="video-autoplay-overlay-volume-button";e.querySelector("."+t)&&(e.querySelector("."+t).querySelector("img").src=r.unmutedImageUrl)},this.volumeInputInit=function(e,o){if(!e.querySelector(".video-autoplay-overlay-volume-"+r.skin)){var i=t.createElement("div",{className:"video-autoplay-overlay-volume-"+r.skin,innerHTML:'<input type="range" min="0" step="1" max="100" value="100">'},{position:"absolute",right:"8px",bottom:"180px",width:"140px",height:"auto",display:"none",transformOrigin:"70px 70px",transform:"rotate(-90deg)",padding:"6px 10px",backgroundColor:r.colorBars});e.appendChild(i);var a=i.querySelector("input");this.css(a,{width:"100%",display:"block"}),r.demoMode||(a.addEventListener("input",(function(i){i.preventDefault(),i.stopPropagation();var a=parseFloat(i.target.value);t.isPlayerYouTube(o)?(o.isMuted()&&(o.unMute(),t.onUnMuted(e)),o.setVolume(a)):o.setVolume(a/100),t.volumeInputHide(e,2e3)})),i.addEventListener("mouseenter",(function(e){clearTimeout(t.volumeTimer)})),i.addEventListener("mouseleave",(function(o){t.volumeInputHide(e,2e3)})))}},this.volumeInputHide=function(e,o){var i=e.querySelector(".video-autoplay-overlay-volume-"+r.skin);clearTimeout(t.volumeTimer),t.volumeTimer=setTimeout((function(){i.style.display="none",n=0}),o)},this.prepareParentEl=function(e){var o=(e.dataset.width||r.width).replace("px",""),i=(e.dataset.height||r.height).replace("px",""),a=e.dataset.position||"relative";e.style.position=a,"absolute"===a&&(e.style.left="0",e.style.top="0"),e.style.width=o.indexOf("%")>-1?o:o+"px",e.style.height=i.indexOf("%")>-1?i:i+"px";var n=e.dataset.vimeoId||e.dataset.vimeoVideoId,l=e.dataset.youtubeId;return n?"vimeo-"+n+"-"+t.generateUniqueString():"yt-"+l+"-"+t.generateUniqueString()},this.embedVideos=function(){var e,o,i,a,n,l=document.querySelectorAll("."+r.targetClassName),s={vimeo:[],youtube:[]};window.ytLoadCallbacks||(window.ytLoadCallbacks=[]);var u,d="chrome"===t.device.browser,A=!!window.lazySizes;l.forEach((function(l){e=l.dataset.vimeoId||l.dataset.vimeoVideoId,l.dataset.youtubeId,o=(l.dataset.width||r.width).replace("px",""),i=(l.dataset.height||r.height).replace("px",""),a=l.dataset.position||"relative",(n=t.getIframeHtml(l))&&(l.innerHTML=n,u=t.getElementVideoIframeId(l),e?s.vimeo.push(u):s.youtube.push(u),l.style.position=a,"absolute"===a&&(l.style.left="0",l.style.top="0"),l.style.width=o.indexOf("%")>-1?o:o+"px",l.style.height=i.indexOf("%")>-1?i:i+"px",r.lazyLoadDisable||d||!A||document.getElementById(u).addEventListener("load",(function(){t.onIframeLoad(this)})))})),(r.lazyLoadDisable||d||!A)&&this.playersInit(s.vimeo,"vimeo"),s.youtube.length>0&&(window.ytLoadCallbacks.push((function(){t.playersInit(s.youtube,"youtube")})),window.onYouTubeIframeAPIReady||window.YT&&window.YT.loaded?(r.lazyLoadDisable||d||!A)&&t.runOnYouTubePlayerReady((function(){t.playersInit(s.youtube,"youtube")})):window.onYouTubeIframeAPIReady=function(){t.debugLog("[YOUTUBE_PLAYER] READY",window.ytLoadCallbacks.length),(r.lazyLoadDisable||d||!A)&&window.ytLoadCallbacks.forEach((function(e){e()}))}),window.addEventListener("resize",this.onResize.bind(this)),setTimeout(this.onResize.bind(this),1)},this.getIframeHtml=function(e,o){var i="chrome"===t.device.browser,a=!!window.lazySizes,n=window.location.origin,l=e.dataset.vimeoId||e.dataset.vimeoVideoId,s=e.dataset.youtubeId,u=e.dataset.controls?"1":"0",d=e.dataset.muted?"1":"0",A=parseInt(e.dataset.autoplay||"0")||r.autoPlay?"1":"0",y=e.dataset.autoplay||r.loop?"1":"0",c=e.dataset.loading||"lazy";t.playingId&&(A="0"),r.lazyLoadDisable&&(c="eager");var p="";if(r.allow&&(l&&-1===r.allow.indexOf("vimeo")||s&&-1===r.allow.indexOf("youtube")))return"";if(l){const i=e.dataset.vimeoPrivateId;o||(o="vimeo-"+l+"-"+t.generateUniqueString()),p="https://player.vimeo.com/video/"+l+"?",p+=i?"h="+i+"&":"?",p+="autoplay="+A+"&loop="+y+"&muted="+d+"&title=0&api=1&transparent=0&byline=0&background=0",p+="&controls="+u,p+="&origin="+encodeURIComponent(n)}else s&&(o||(o="yt-"+s+"-"+t.generateUniqueString()),p="https://www.youtube.com/embed/"+s,p+="?autoplay="+A+"&loop="+y+"&muted="+d+"&enablejsapi=1&modestbranding=1&showinfo=0&rel=0",p+="&controls="+u,p+=u+"&origin="+encodeURIComponent(n));var g='<iframe id="'+o+'" loading="'+c+'" width="560" height="315"';return"lazy"!==c||i?g+=' src="'+p+'"':a?g+=' class="lazyload" data-load-mode="1" data-src="'+p+'"':(console.error("LazySizes JS not found."),g+=' src="'+p+'"'),g+=' style="position: absolute; width: 100%; height: 100%;"',g+=' allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"',g+=' frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'},this.demoModeInit=function(){r.disableSeek=!0,document.querySelectorAll("."+r.targetClassName).forEach((function(e){if(e.innerHTML="",r.posterUrl){var o=t.createElement("img",{src:r.posterUrl,id:"poster-"+t.generateUniqueString()},{position:"absolute",width:"100%",height:"100%",display:"block",left:"0",top:"0"});e.appendChild(o)}t.addOverlay(e),t.watermarkInit(e),t.fullScreenButtonInit(e),r.autoPlay||(t.progressBarInit(e),t.onPause(e));var i=e.querySelector(".video-autoplay-progress-line");i&&(i.style.width="30%")})),window.addEventListener("resize",this.onResize.bind(this)),setTimeout(this.onResize.bind(this),1)},this.onIframeLoad=function(e){if(e.getAttribute("src")){var t=e.id,o=0===t.indexOf("vimeo-")?"vimeo":"youtube";this.debugLog("[IFRAME_LOADED]",t,o,e.className),this.playersInit([t],o)}},this.playersInit=function(e,o){0!==e.length&&(this.device.isMobileFirefox&&r.regularPlayerForMobileFirefox||"opera-touch"===t.device.browser||(t.debugLog("[PLAYERS_INIT] iframesIds: "+e.join(",")+" type: "+o),"youtube"!==o||window.YT&&window.YT.loaded?e.forEach((function(e){window.vpaPlayers[e]||t.createPlayer(e,o)})):t.debugLog("[IFRAME_ID] "+e.join(",")+" type: "+o+" - ERROR - YT JS not loaded")))},this.createPlayer=function(e,o){if(e&&window.vpaPlayers[e])return null;var i,a;if(!e&&o)if(0===(e=this.prepareParentEl(o,!0)).indexOf("yt-")){var n=document.createElement("div");n.setAttribute("id",e),o.appendChild(n)}else o.setAttribute("id","player-"+e);else a=document.getElementById(e),o=a.parentNode;var l=0===e.indexOf("vimeo-")?"vimeo":"youtube";if(t.debugLog("[PLAYER_CREATE] "+e+" type: "+l),"vimeo"===l){var s=t.getIframeHtml(o,e);if(!s)return null;if(o.innerHTML=s,!document.getElementById(e))return t.debugLog("[IFRAME_ID] "+e+" type: "+l+" - element not found"),null;if(!window.Vimeo)return null;o.dataset.vimeoId||o.dataset.vimeoVideoId;const a=o.dataset.vimeoPrivateId;(i=new Vimeo.Player(o.querySelector("iframe"),{id:a?"":o.dataset.vimeoId,url:a?"https://player.vimeo.com/video/"+o.dataset.vimeoId+"?h="+a:"",autoplay:!(!parseInt(o.dataset.autoplay||"0")&&!r.autoPlay),controls:!!parseInt(o.dataset.controls||"0"),muted:r.startMuted,transparent:!1})).ready().then((function(){t.debugLog("[VIMEO_PLAYER] onReady"),window.vpaPlayers[e]=i,i.element.setAttribute("id",e),i.element.style.width="100%",i.element.style.height="100%",i.element.style.pointerEvents="none",t.addOverlay(document.getElementById(e).parentNode,i),t.overlayElementsInit(document.getElementById(e).parentNode,i)})),i.on("ended",(function(){r.loop?(i.setCurrentTime(0),i.play()):t.onStateChange(document.getElementById(e).parentNode,i,"ended")})),i.on("play",(function(){t.onStateChange(document.getElementById(e).parentNode,i,"play")})),i.on("pause",(function(){t.onStateChange(document.getElementById(e).parentNode,i,"pause")}))}else if("youtube"===l){if(!document.getElementById(e))return void t.debugLog("[IFRAME_ID] "+e+" type: "+l+" - element not found");if(!window.YT||!window.YT.loaded)return void t.debugLog("[YOUTUBE_PLAYER_ERROR] JS not loaded");i=new YT.Player(e,{videoId:o.dataset.youtubeId,height:"100%",width:"100%",playerVars:{id:e,origin:window.location.origin,rel:"0",controls:o.dataset.controls?"1":"0",autoplay:parseInt(o.dataset.autoplay||"0")||r.autoPlay?"1":"0",loop:o.dataset.loop||r.loop?"1":"0",muted:r.startMuted},events:{onReady:function(r){t.debugLog("[YOUTUBE_PLAYER] onReady",e),window.vpaPlayers[e]=i,(a=document.getElementById(e)).style.position="absolute",a.style.left="0",a.style.top="0",a.style.width="100%",a.style.height="100%",a.style.pointerEvents="none",t.getIsMuted(i,(function(a){t.debugLog("[YOUTUBE_PLAYER] onReady - IS MUTED?",e,a),o.dataset.muted&&!a&&(t.debugLog("[YOUTUBE_PLAYER] onReady MUTE",e),i.mute())})),t.addOverlay(a.parentNode,i),t.overlayElementsInit(document.getElementById(e).parentNode,i)},onStateChange:function(o){if(t.debugLog("[YOUTUBE_PLAYER] onStateChange",o.data,o.data===YT.PlayerState.PLAYING?"PLAYING":"NOT_PLAYING",e),o.data===YT.PlayerState.ENDED&&r.loop)return i.seekTo(0),void i.playVideo();t.onStateChange(document.getElementById(e).parentNode,o.target,o.data)},onError:function(e){t.debugLog("[ERROR_YOUTUBE]",e)}}})}return i},this.addOverlay=function(e,o){var i=!(!parseInt(e.dataset.autoplay||"0")&&!r.autoPlay),a="<div>"+this.sanitizeString(r.unmuteText)+"</div>";r.lottieFileUrl?a+='<div class="video-autoplay-overlay-lottie" data-lottie-file-url="'+r.lottieFileUrl+'"></div>':r.iconImageUrl&&(a+='<div><img src="'+r.iconImageUrl+'" alt=""></div>'),a+="<div>"+this.sanitizeString(r.unmuteTextSecondary)+"</div>";var n=t.createElement("div",{className:"video-autoplay-overlay"+(r.skin?" video-autoplay-overlay-"+r.skin:""),innerHTML:'<div class="video-autoplay-overlay-image" style="position: absolute; left: 50%; top: 50%; pointer-events: none;">'+a+"</div>"},r.skin?{}:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",display:"block",boxSizing:"border-box",backgroundColor:r.unmuteBackgroundColor,color:r.unmuteTextColor,textAlign:"center",fontFamily:"sans-serif",fontSize:"20px",lineHeight:"1.4",padding:"0",cursor:"pointer"});r.unmuteTextColor&&(n.style.color=r.unmuteTextColor),e.appendChild(n),e.classList.add("video-autoplay-overlay-image-active"),i&&(r.autoPlayShakeAnimation&&n.querySelector(".video-autoplay-overlay-image").classList.add("video-autoplay-animation-shake"),this.lottePlayerInit(n),this.overlaySetSize(e.offsetHeight,n)),o&&n.addEventListener("click",(function(i){i.preventDefault();var a=!e.querySelector(".video-autoplay-overlay-image");n.style.backgroundColor="transparent",e.querySelector(".video-autoplay-overlay-image")&&t.removeEl(e.querySelector(".video-autoplay-overlay-image")),e.classList.remove("video-autoplay-overlay-image-active"),t.playingId=null;var r=t.getClicks(e);t.increaseClick(e),t.debugLog("[CLICKS] "+r),a?t.playToggle(e,o):t.isPlayerYouTube(o)?(o.pauseVideo(),o.seekTo(0),o.unMute(),o.setVolume(100),o.playVideo(),setTimeout((function(){o.getPlayerState()!==YT.PlayerState.PLAYING&&o.playVideo()}),200)):(o.pause(),o.setCurrentTime(0),o.setVolume(1),o.play(),setTimeout((function(){o.getPaused().then((function(e){e&&o.play()}))}),200))}))},this.overlayElementsInit=function(e,o){var i=!(!parseInt(e.dataset.autoplay||"0")&&!r.autoPlay);e.dataset.muted;i&&!this.playingId&&!this.device.isMobileFirefox&&this.isPlayerYouTube(o)?setTimeout((function(){o.getPlayerState()!==YT.PlayerState.PLAYING?(o.mute(),o.playVideo(),t.debugLog("[START_AUTOPLAY]",t.getElementVideoIframeId(e))):(!o.isMuted()||o.getVolume()>0)&&e.querySelector(".video-autoplay-overlay")&&!r.skin&&(e.querySelector(".video-autoplay-overlay").style.backgroundColor="transparent")}),1500):t.isPlayerYouTube(o)?o.getPlayerState()!==YT.PlayerState.PLAYING&&t.onPause(e,o):o.getPaused().then((function(i){i&&t.onPause(e,o)})),this.volumeInputInit(e,o),this.watermarkInit(e,o),this.fullScreenButtonInit(e,o)},this.playToggle=function(e,t){this.isPlayerYouTube(t)?t.getPlayerState()!==YT.PlayerState.PLAYING?t.playVideo():t.pauseVideo():t.getPaused().then((function(e){e?t.play():t.pause()}))},this.updateProgress=function(e,o,i){void 0===i&&(i=!0);var a,r,n,l=e.querySelector(".video-autoplay-progress-line");l&&(t.isPlayerYouTube(o)?(a=o.getDuration(),r=o.getCurrentTime(),n=o.getPlayerState()===YT.PlayerState.ENDED?100:Math.round(100/(a/r)),l.style.width=n+"%",clearTimeout(t.timers[t.getTimerKey(e,o,"progress-")]),i&&(t.timers[t.getTimerKey(e,o,"progress-")]=setTimeout((function(){t.updateProgress(e,o)}),200))):o.getCurrentTime().then((function(a){o.getDuration().then((function(r){n=Math.round(100/(r/a)),l.style.width=n+"%",clearTimeout(t.timers[t.getTimerKey(e,o,"progress-")]),i&&(t.timers[t.getTimerKey(e,o,"progress-")]=setTimeout((function(){t.updateProgress(e,o)}),200))}))})))},this.progressBarInit=function(e,o){this.debugLog("[PROGRESS_BAR_INIT]",this.isPlayerYouTube(o)?"youtube":"vimeo");var a=e.querySelector(".video-autoplay-overlay");if(a){if(!a.querySelector(".video-autoplay-progress-line")){var n=r.skin?'style="background-color: '+r.colorProgressBarTotal+';"':' style="height: 10px; width: 100%; background-color: '+r.colorProgressBarTotal+';"',l=r.skin?'style="background-color: '+r.colorProgressBar+';"':'style="height: 10px; width: 0%; pointer-events: none; background-color: '+r.colorProgressBar+';"',s=this.createElement("div",{className:i,innerHTML:'<div class="video-autoplay-progress"'+n+'><div class="video-autoplay-progress-line"'+l+"></div></div>"},r.skin?{}:{position:"absolute",left:0,bottom:0,width:"100%",height:"10px",color:"#fff",fontSize:"20px",boxSizing:"border-box"});s.style.backgroundColor=r.colorBars,a.appendChild(s),r.disableSeek||a.querySelector(".video-autoplay-progress").addEventListener("click",(function(i){i.preventDefault(),i.stopPropagation();var a=i.target.getBoundingClientRect(),r=100/(a.width/(i.clientX-a.left));if(t.isPlayerYouTube(o)){var n=o.getDuration()/(100/r);o.seekTo(n),setTimeout((function(){t.updateProgress(e,o,!1)}),200)}else o.getDuration().then((function(i){var a=i/(100/r);o.setCurrentTime(a),setTimeout((function(){t.updateProgress(e,o,!1)}),200)}))}))}o&&(this.isPlayerYouTube(o)?(t.debugLog("[YOUTUBE_PLAYER] progressBarInit - paused?",o.getPlayerState()!==YT.PlayerState.PLAYING),o.getPlayerState()!==YT.PlayerState.PLAYING||e.querySelector(".video-autoplay-overlay-image")||this.updateProgress(e,o)):o.getPaused().then((function(i){t.debugLog("[VIMEO_PLAYER] progressBarInit - paused?",i),i||e.querySelector(".video-autoplay-overlay-image")||t.updateProgress(e,o)})))}},this.colorsUpdate=function(){var e;document.querySelectorAll("."+r.targetClassName).forEach((function(t){(e=t.querySelector(".video-autoplay-overlay")).querySelector(".video-autoplay-progress")&&(e.querySelector(".video-autoplay-progress").style.backgroundColor=r.colorProgressBarTotal,e.querySelector(".video-autoplay-progress-line").style.backgroundColor=r.colorProgressBar),e.querySelector("."+a)&&(e.querySelector("."+a).style.backgroundColor=r.colorPlayButton,e.querySelector("."+o).style.backgroundColor=r.colorBars,e.querySelector("."+i).style.backgroundColor=r.colorBars)}))},this.onStateChange=function(e,t,o){this.isPlayerYouTube(t)?o===YT.PlayerState.PLAYING?this.onPlay(e,t):o===YT.PlayerState.PAUSED?this.onPause(e,t):o===YT.PlayerState.ENDED&&(this.debugLog("[ENDED]"),this.playingId=null,e.querySelector(".video-autoplay-overlay-image")&&this.removeEl(e.querySelector(".video-autoplay-overlay-image")),this.onPause(e,t,r.textEnded),this.updateProgress(e,t,!1)):"play"===o?this.onPlay(e,t):"pause"===o?this.onPause(e,t):"ended"===o&&(this.debugLog("[ENDED]"),this.playingId=null,e.querySelector(".video-autoplay-overlay-image")&&this.removeEl(e.querySelector(".video-autoplay-overlay-image")),this.onPause(e,t,r.textEnded),this.updateProgress(e,t,!1))},this.onPlay=function(e,n){var l=this.isPlayerYouTube(n);e.dataset.muted;this.debugLog("[ON_PLAY]",l?"youtube":"vimeo"),r.pauseOthersWhenPlaying&&this.getIsMuted(n,(function(o){t.debugLog("[ON_PLAY] IS MUTED?",o),o||(t.playingId=t.getElementVideoIframeId(e),t.pauseOthers())}));var s=function(){e.querySelector(".video-autoplay-overlay-image")&&t.removeEl(e.querySelector(".video-autoplay-overlay-image")),e.querySelector(".video-autoplay-overlay")&&(e.querySelector(".video-autoplay-overlay").style.backgroundColor="transparent"),clearTimeout(t.timers[t.getTimerKey(e,n,"play-")]),t.timers[t.getTimerKey(e,n,"play-")]=setTimeout((function(){e.classList.remove("video-autoplay-paused"),r.skin||(e.querySelector("."+o)&&(e.querySelector("."+o).style.display="none"),e.querySelector("."+a)&&(e.querySelector("."+a).style.display="none"),e.querySelector("."+i)&&(e.querySelector("."+i).style.display="block",e.querySelector("."+i).style.height="10px")),t.watermarkInit(e,n),t.fullScreenButtonInit(e,n),t.volumeButtonInit(e,n)}),500),t.progressBarInit(e,n)},u=function(){clearTimeout(t.timers[t.getTimerKey(e,n,"play-")]),t.timers[t.getTimerKey(e,n,"play-")]=setTimeout((function(){e.querySelector("."+o)&&(e.querySelector("."+o).style.display="none"),e.querySelector("."+a)&&(e.querySelector("."+a).style.display="none"),e.querySelector("."+i)&&(e.querySelector("."+i).style.display="none"),t.watermarkInit(e,n),t.fullScreenButtonInit(e,n),t.volumeButtonInit(e,n)}),500)};if(l){var d=this.getClicks(e);this.increaseClick(e),t.debugLog("[YOUTUBE_MUTED_VOLUME]",n.isMuted(),n.getVolume(),d),!n.isMuted()&&n.getVolume()>0||d>0?s():u()}else n.getVolume().then((function(e){t.debugLog("[VIMEO_VOLUME]",e),e>0?s():u()}))},this.onPause=function(e,n,l){var s=this.isPlayerYouTube(n);this.debugLog("[ON_PAUSE]",s?"youtube":"vimeo");var u=t.getClicks(e);if(this.increaseClick(e),0===u&&this.getIsAutoplay(e))return this.debugLog("[ON_PAUSE_PLAY_AGAIN]",s?"youtube":"vimeo"),t.mute(e,n),void t.playToggle(e,n);e.classList.add("video-autoplay-paused"),clearTimeout(t.timers[t.getTimerKey(e,n,"play-")]),clearTimeout(t.timers[t.getTimerKey(e,n,"progress-")]),void 0===l&&(l=r.textPaused),this.progressBarInit(e,n);var d=e.querySelector(".video-autoplay-overlay");if(d){if(e.querySelector(".video-autoplay-overlay-image")&&t.removeEl(e.querySelector(".video-autoplay-overlay-image")),d.querySelector("."+o))r.skin||(d.querySelector("."+o).textContent=l,d.querySelector("."+o).style.display="block",d.querySelector("."+a).style.display="block");else{var A=this.createElement("div",{className:o,textContent:l},r.skin?{}:{position:"absolute",left:0,top:0,width:"100%",height:"60px",padding:"0 30px",textAlign:"left",backgroundColor:r.colorBars,color:"#fff",fontSize:"20px",lineHeight:"60px",boxSizing:"border-box",pointerEvents:"none"});d.appendChild(A);var y=this.createElement("div",{className:a},r.skin?{}:{position:"absolute",left:"50%",top:"50%",width:"120px",height:"120px",margin:"-60px 0 0 -60px",background:'url("'+r.playImageUrl+'") no-repeat 50% 50% '+r.colorPlayButton,color:"#fff",boxSizing:"border-box",borderRadius:"50%",pointerEvents:"none"});y.style.backgroundColor=r.colorPlayButton,d.appendChild(y)}r.skin||d.querySelector("."+i)&&(d.querySelector("."+i).style.height="60px"),this.watermarkInit(e,n),t.fullScreenButtonInit(e,n),t.volumeButtonInit(e,n)}},this.pauseOthers=function(){this.playingId&&(t.debugLog("[PAUSE_OTHERS] playing: ",this.playingId),Object.keys(window.vpaPlayers).forEach((function(e){if(e!==t.playingId){var o=window.vpaPlayers[e];if(o){var i=document.getElementById(e).parentNode;clearTimeout(t.timers[t.getTimerKey(i,o,"pause-others-")]),t.timers[t.getTimerKey(i,o,"pause-others-")]=setTimeout((function(){t.getIsMuted(o,(function(i){t.debugLog("[PAUSE_OTHERS] IS MUTED?",e,i),i||(t.isPlayerYouTube(o)?o.getPlayerState&&o.getPlayerState()===YT.PlayerState.PLAYING&&o.pauseVideo():o.getPaused().then((function(e){e||o.pause()})))})),t.debugLog("[PAUSE_OTHERS] video paused:",e),t.watermarkInit(i,o),t.fullScreenButtonInit(i,o),t.volumeButtonInit(i,o)}))}}})))},this.isPlayerYouTube=function(e){return!!e&&!!(window.YT&&e instanceof YT.Player)},this.getClicks=function(e){return e.dataset.clicks||(e.dataset.clicks="0"),clicks=e.dataset.clicks,parseInt(clicks,10)},this.increaseClick=function(e){var t=this.getClicks(e);e.dataset.clicks=String(++t)},this.getIsAutoplay=function(e){return e.dataset.autoplay?!!parseInt(e.dataset.autoplay,10):r.autoPlay},this.createElement=function(e,t,o){var i=document.createElement(e);return t&&Object.keys(t).forEach((function(e){null!==t[e]&&(["className","innerHTML","outerHTML","innerText","textContent"].indexOf(e)>-1?i[e]=t[e]:i.setAttribute(e,t[e]))})),this.css(i,o),i},this.css=function(e,t){e&&t&&Object.keys(t).forEach((function(o){e.style[o]=t[o]}))},this.removeEl=function(e){e.parentNode.removeChild(e)},this.getIsAutoPlayAvailable=function(e,o){if(this.debugLog("[CALL-isAutoPlayAvailable]"),this.device.isMobile)e();else{var i=this.createElement("video",{src:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3//728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA+3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAr/4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ==",width:"200",height:"100",id:"cp-test-video"},{opacity:"0.01",position:"fixed",right:0,bottom:0,pointerEvents:"none"}),a=function(e){t.debugLog("[VIDEO CHECK AUTOPLAY] FAIL",e&&e.message?e.message:"ERROR"),t.removeEl(document.getElementById("cp-test-video")),o()};document.body.appendChild(i);var r="";try{t.debugLog("[INSIDE_TRY]"),setTimeout((function(){t.debugLog("[TIMEOUT]",r),r||a()}),1e3),i.play().then((function(){t.debugLog("[VIDEO CHECK AUTOPLAY] SUCCESS"),t.removeEl(document.getElementById("cp-test-video")),r="resolved",e()})).catch((function(e){r="rejected",a(e)})).finally((function(e){t.debugLog("[PLAY_PROMISE_FINALLY]",e,r)}))}catch(e){t.debugLog("[PLAY PROMISE ERROR]"),r="rejected",a(e)}finally{t.debugLog("[TRY_FINALLY]",r)}this.debugLog("[AFTER-isAutoPlayAvailable]")}},this.createAnimationStyleSheet=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),document.querySelector("head").appendChild(e);e.appendChild(document.createTextNode(".video-autoplay-animation-shake { display: block; animation: shake 1.5s; animation-iteration-count: infinite; }\n@keyframes shake {\n    0% { transform: translate(1px, 1px) rotate(0deg); }\n    10% { transform: translate(-2px, -3px) rotate(-2deg); }\n    20% { transform: translate(-4px, 0px) rotate(2deg); }\n    30% { transform: translate(4px, 2px) rotate(0deg); }\n    40% { transform: translate(2px, -2px) rotate(2deg); }\n    50% { transform: translate(-2px, 3px) rotate(-2deg); }\n    60% { transform: translate(-4px, 2px) rotate(0deg); }\n    70% { transform: translate(4px, 2px) rotate(-2deg); }\n    80% { transform: translate(-2px, -2px) rotate(2deg); }\n    90% { transform: translate(2px, 3px) rotate(0deg); }\n    100% { transform: translate(2px, 2px) rotate(-2deg); }\n}"))},this.getElementVideoIframeId=function(e){return e.querySelector("iframe")?e.querySelector("iframe").id:e.querySelector("img").id},this.getElementVideoId=function(e){return e.dataset.youtubeId||e.dataset.vimeoId||e.dataset.vimeoVideoId},this.getTimerKey=function(e,t,o){var i=this.getElementVideoIframeId(e);return this.timers[o+i]||(this.timers[o+i]=null),o+i},this.deviceDetectInit=function(){var e=window.navigator.userAgent.toLowerCase(),o=window.navigator.platform;if(this.device.isAndroid=e.indexOf("android")>-1,this.device.isIOS=/iP(hone|od|ad)/.test(o),this.device.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),this.device.isEdge=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob),this.device.browser="",this.device.version=0,this.device.isAutoPlayAvailable=!this.device.isMobile,e.indexOf("firefox")>-1)this.device.browser="firefox";else if(-1!==e.indexOf(" opt/"))this.device.browser="opera-touch";else if(e.indexOf("chrome")>-1||e.indexOf("crios")>-1)this.device.browser="chrome",this.device.isAutoPlayAvailable=!1;else if(-1!==e.indexOf("safari")){this.device.browser="safari";var i=/version\/(\d+)/.exec(e);this.device.version=i.length>=1?parseInt(i[1]):0,"safari"===this.device.browser&&11===this.device.version&&(this.device.isAutoPlayAvailable=!1)}this.device.isMobileFirefox=!(!t.device.isMobile||"firefox"!==t.device.browser)},this.onResize=function(){document.querySelectorAll("."+r.targetClassName).forEach((function(e){if(e.querySelector(".video-autoplay-overlay")){var o=e.querySelector(".video-autoplay-overlay"),i=o.offsetHeight;o.querySelector(".video-autoplay-overlay-image")&&t.overlaySetSize(i,o)}}))},this.overlaySetSize=function(e,t){if(t){var o=t.querySelector("div"),i=t.querySelector("div > img"),a=o.clientHeight;o.style.width="200px",o.style.margin="-"+Math.ceil(a/2)+"px 0 0 -100px",e>0&&e<185?(o.style.fontSize="16px",i&&(i.style.width="auto",i.style.height="60px")):(o.style.fontSize="20px",i&&(i.style.width="auto",i.style.height="100px"))}},this.isOverlayImageMode=function(e){return!!e.querySelector(".video-autoplay-overlay-image")},this.lottePlayerInit=function(e){var t=e.querySelector(".video-autoplay-overlay-lottie");if(t&&window.lottie){t.style.width="200px",t.style.height="200px",t.style.margin="-20px 0";var o=t.dataset.lottieFileUrl,i=window.lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:o});i.addEventListener("loopComplete",(function(e){i.wrapper.dataset.loopCopleted="1"})),i.addEventListener("DOMLoaded",(function(e){var t,o,a=0;i.wrapper.querySelectorAll("g").forEach((function(e,i){e.style.display="block";for(let i=0;i<e.children.length;i++)if("path"===e.children[i].tagName){if(void 0===r.lottieAnimationColorsMapping[a])continue;o=r.lottieAnimationColorsMapping[a],t=r.lotteAnimationElementColors[o],e.children[i].style.stroke=t,e.children[i].style.fill=t,a++}}))}))}},this.sanitizeString=function(e){return e.replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))},this.loadStyleSheet=function(e,t,o,i){var a=document.getElementsByTagName("head")[0],r=document.createElement("link");return r.setAttribute("href",e),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),i&&r.setAttribute("id",i),"sheet"in r?("sheet","cssRules"):("styleSheet","rules"),a.appendChild(r),"function"==typeof t&&t.call(o||window,!0,r),r},this.generateUniqueString=function(e){e=e||8;for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=t.length,i="",a=0;a<e;a++){var r=Math.floor(Math.random()*o);i+=t.substr(r,1)}return i},this.extend=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},this.debugLog=function(){r.debug&&console.log.apply(this,arguments)},this.updateOptions(e),this.init()};